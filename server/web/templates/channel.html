{{define "channel-card"}}
<div class="bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-4 border {{if .IsPlaying}}border-green-500 hover:border-green-400 hover:shadow-green-500/20{{else}}border-gray-700 hover:border-blue-500 hover:shadow-blue-500/20{{end}} hover:shadow-lg transition-all duration-300 relative overflow-hidden" 
     hx-get="/web/channel/{{.PathName}}/status" 
     hx-trigger="every 5s"
     hx-swap="outerHTML">
    
    {{if .IsPlaying}}
    <div class="absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r from-green-500 to-green-400"></div>
    {{end}}
    
    <div class="flex justify-between items-start mb-3">
        <div>
            <div class="text-white text-lg font-semibold">{{.Name}}</div>
        </div>
        <!-- <div> -->
        <!--     <div class="text-white text-lg font-semibold">{{.PathName}}</div> -->
        <!-- </div> -->
        <span class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-semibold uppercase tracking-wide {{if .IsPlaying}}bg-green-500/20 text-green-400{{else}}bg-white/10 text-gray-500{{end}}">
            {{if .IsPlaying}}
                <span class="w-1.5 h-1.5 rounded-full bg-green-400 pulse-dot"></span>
                Live
            {{else}}
                Offline
            {{end}}
        </span>
    </div>
    
    <div class="mb-3">
        <div class="text-gray-300 text-sm mb-2 flex items-center gap-1.5">
            <span>ðŸ“º</span>
            <span>{{.NowPlaying}}</span>
        </div>
        <div class="text-gray-500 text-sm flex items-center gap-1.5">
            <span>ðŸ‘¥</span>
            <span>{{.Count}} {{if eq .Count 1}}viewer{{else}}viewers{{end}}</span>
        </div>
    </div>

    {{if .IsPlaying}}
    <div class="flex items-center gap-2 mt-2 mb-3 p-2 bg-white/5 rounded-lg">
        <div class="relative w-9 h-5 {{if .ShouldKeepPlaying}}bg-green-500{{else}}bg-white/20{{end}} rounded-full cursor-pointer"
             hx-post="/web/channel/{{.PathName}}/keepplaying/toggle"
             hx-swap="outerHTML"
             hx-target="closest .bg-gradient-to-br">
            <div class="absolute top-0.5 {{if .ShouldKeepPlaying}}right-0.5{{else}}left-0.5{{end}} w-4 h-4 bg-white rounded-full transition-all"></div>
        </div>
        <span class="text-gray-500 text-xs">Keep playing when idle</span>
    </div>
    {{end}}

    <div class="flex gap-2 pt-3 border-t border-gray-700">
        {{if .IsPlaying}}
            <button class="flex-1 px-3 py-2 bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg text-sm font-semibold uppercase tracking-wide transition-all hover:-translate-y-0.5 hover:shadow-lg hover:shadow-blue-500/30"
                    onclick="playChannel('{{.PathName}}')">
                Watch
            </button>
            <button class="flex-1 px-3 py-2 bg-white/10 hover:bg-white/15 text-gray-300 rounded-lg text-sm font-semibold uppercase tracking-wide transition-all"
                    hx-post="/web/channel/{{.PathName}}/skip"
                    hx-swap="outerHTML"
                    hx-target="closest .bg-gradient-to-br">
                Skip
            </button>
            <button class="flex-1 px-3 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg text-sm font-semibold uppercase tracking-wide transition-all"
                    hx-post="/web/channel/{{.PathName}}/stop"
                    hx-swap="outerHTML"
                    hx-target="closest .bg-gradient-to-br">
                Stop
            </button>
        {{else}}
            <button class="flex-1 px-3 py-2 bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg text-sm font-semibold uppercase tracking-wide transition-all hover:-translate-y-0.5 hover:shadow-lg hover:shadow-blue-500/30"
                    onclick="playChannel('{{.PathName}}')">
                Watch
            </button>
            <!-- <button class="flex-1 px-3 py-2 bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg text-sm font-semibold uppercase tracking-wide transition-all hover:-translate-y-0.5 hover:shadow-lg hover:shadow-blue-500/30" -->
            <!--         hx-post="/web/channel/{{.Name}}/play" -->
            <!--         hx-swap="outerHTML" -->
            <!--         hx-target="closest .bg-gradient-to-br"> -->
            <!--     Watch -->
            <!-- </button> -->
        {{end}}
    </div>
</div>
{{end}}
